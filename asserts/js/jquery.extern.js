define(["jquery"],function(a){Array.prototype.unique=function(){for(var b={},e=this.length,a=0;a<e;a++)"undefined"==typeof b[this[a]]&&(b[this[a]]=1);this.length=0;for(a in b)this[this.length]=a;return this};a.extend({includeCSSFiles:[],includeCSS:function(b,e){var c="string"==typeof b?[b]:b;e=e?e:TPX.PATH_ASSERTS+"/";for(var d=0;d<c.length;d++){for(var f=c[d].replace(/^\s|\s$/g,""),g=document.createElement("link"),f=e+f+TPX.SUFFIX_CSS,h=!0,k=0;k<a.includeCSSFiles.length;k++)f==a.includeCSSFiles[k]&&
(h=!1);h&&(0<a("link[href='"+f+"']").length||0<a("link[href='"+f+"']").length)&&(h=!1);h&&(a.includeCSSFiles.push(f),g.setAttribute("rel","stylesheet"),g.setAttribute("type","text/css"),g.setAttribute("href",f),document.getElementsByTagName("head")[0].appendChild(g))}},includeJSFiles:[],includeJS:function(b,e){var c="string"==typeof b?[b]:b;e=e?e:TPX.PATH_ASSERTS;for(var d=0;d<c.length;d++){for(var f=c[d].replace(/^\s|\s$/g,""),f=e+f+TPX.SUFFIX_JS,g="src='"+f+"'",h=!0,k=0;k<a.includeJSFiles.length;k++)g==
a.includeJSFiles[k]&&(h=!1);h&&(0<a("script[src='"+f+"']").length||0<a("script[src='"+f+"']").length)&&(h=!1);h&&(a.includeJSFiles.push(g),a("body").append("<script language='javascript' type='text/javascript' "+g+" onload='alert(1);'>\x3c/script>"))}},getRootWindow:function(){for(var b=window;b.self!=b.parent;)b=b.parent;return b},urlencode:function(b){var a="";b+="";for(var c=0;c<b.length;c++)var d=b.charAt(c),f=b.charCodeAt(c).toString(16),a=" "==d?a+"+":-1!="!\"#$%&'()*+,/:;<=>?[]^`{|}~%".indexOf(d)?
a+("%"+f.toString(16)):a+d;return a},urldecode:function(b){for(var a="",c=0;c<b.length;c++){var d=b.charAt(c);"+"==d?a+=" ":"%"==d?(d=b.substring(c+1,c+3),127<parseInt("0x"+d)?(a+=decodeURI("%"+d.toString()+b.substring(c+3,c+9).toString()),c+=8):(a+=ShengUtils.AsciiToString(parseInt("0x"+d)),c+=2)):a+=d}return a},getUrlAnchor:function(){var a=window.location.href,e=a.indexOf("#");return 0<e?a=a.substring(e+1):""},redirect:function(a){window.location.href=a},defaultFormCallback:function(b,e){b?"number"==
typeof b.status?0==b.status?(b.url?a.dialog({lock:!0,title:": (",max:!1,min:!1,fixed:!0,icon:"error.gif",content:b.info,close:function(){b.url&&("[reload]"==b.url?window.location.reload():a.redirect(b.url))},ok:function(){return!0}}):a.dialog.tips(b.info,2,"error.gif"),a("#auto-click-on-error").length&&a("#auto-click-on-error").click()):1==b.status&&(b.info?b.url?a.dialog({lock:!0,title:": )",max:!1,min:!1,fixed:!0,icon:"success.gif",content:b.info,close:function(){b.url&&("[reload]"==b.url?window.location.reload():
a.redirect(b.url))},ok:function(){return!0}}):a.dialog.tips(b.info,2,"success.gif"):b.url&&("[reload]"==b.url?window.location.reload():a.redirect(b.url))):e?e(b):alert("ERROR: Unrecognized data! \n==\n"+b+"\n=="):alert("ERROR: Response Data Empty!")}});a(function(){var b=["jquery"];if(0<a("form.tpx-ajaxsubmit").length||a("body").hasClass("tpx-use-dialog"))b.push("lhgdialog.base"),b.push("lhgdialog.lang");require(b,function(){a("form.tpx-ajaxsubmit").unbind("submit");a("form.tpx-ajaxsubmit").on("submit",
function(b){b&&b.preventDefault();if(TPX.UEDITOR)for(b=0;b<TPX.UEDITOR.length;b++)TPX.UEDITOR[b].sync();a(".fuelux .pillbox").each(function(b,d){var c=a(d).attr("id"),e=a("#"+c).pillbox("items"),f=[];for(b=0;b<e.length;b++)f.push(e[b].value);a("input[name="+c+"]").val(f.join(","))});b=a(this).serializeArray();var c=null,c=a(this).attr("callback")?eval(a(this).attr("callback")):a.defaultFormCallback,d=a.dialog.tips(lhgdialog_lang.LOADING,10,"loading.gif"),f=setTimeout(function(){d&&(d.close(),d=null);
a.dialog.alert(lhgdialog_lang.TIMEOUT)},3E4),g=function(a){d&&(d.close(),d=null);clearTimeout(f);c(a)};"post"==a(this).attr("method")?a.post(a(this).attr("action"),b,g):a.get(a(this).attr("action"),b,g);return!1})})})});